{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"Text Only<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"cuprite/","title":"Cuprite","text":"<p>Rails\u306e\u30b7\u30b9\u30c6\u30e0\u30c6\u30b9\u30c8\u3067Chrome\u3092\u64cd\u4f5c\u3055\u305b\u308b\u30c9\u30e9\u30a4\u30d0\u306eFerrum\u3092\u4f7f\u3044\u3084\u3059\u304f\u3057\u305f\u306e\u304cCuprite\u3002 \u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u306fNode.js\u306ePuppeteer\u306b\u8fd1\u304f\u3066\u3001CDP\u30d7\u30ed\u30c8\u30b3\u30eb\u3068\u3044\u3046\u3082\u306e\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u306e\u3067Selenium\u306b\u6bd4\u3079\u3066\u6319\u52d5\u304c\u8efd\u3044\u306e\u3060\u3068\u304b\u3002</p>"},{"location":"cuprite/#_1","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066","text":"<p>\u5b9f\u884c\u74b0\u5883\u306b<code>chrome</code>\u306e\u30d0\u30a4\u30ca\u30ea\u304c\u5fc5\u8981\u3002 Google Chrome\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u304f\u306f\u306a\u3063\u305f\u306e\u3067\u3001Chromium\u3067\u4ee3\u7528\u3059\u308b\u3002 Ubuntu Desktop\u3067\u3042\u308c\u3070Selenium\u306fSnap\u7d4c\u7531\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3002 Google Chrome\u306f\u5225\u9014deb\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002</p> <pre><code>$ sudo snap install chromium\n</code></pre> Gemfile<pre><code>group :development, :test do\n  gem \"capybara\", \"~&gt; 3.39\"\n  gem \"cuprite\", \"~&gt; 0.14.3\"\n  gem \"rspec-rails\", \"~&gt; 6.0\"\nend\n</code></pre> <p>\u4eca\u56de\u4f7f\u3046gem\u306f\u3053\u308c\u3002</p> <p>System\u30c6\u30b9\u30c8\u306egem\u306f\u308f\u3051\u3082\u308f\u304b\u3089\u305a\u305f\u304f\u3055\u3093\u5165\u308c\u3066\u3057\u307e\u3044\u304c\u3061\u3060\u304c\u3001<code>cuprite</code>\u3068<code>capybara</code>\u3055\u3048\u3042\u308c\u3070\u52d5\u304b\u305b\u308b\u3002</p>"},{"location":"cuprite/#tldr","title":"TL;DR","text":"spec/support/cuprite.rb<pre><code>Capybara.javascript_driver = :cuprite\n\n# \u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u306e\u4fdd\u5b58\u5148\u3092\u6307\u5b9a\u3067\u304d\u308b\nCapybara.save_path = Rails.root.join(\"tmp/capybara/\")\n\n# Chrome\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089Rails\u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\nif ENV[\"CHROME_URL\"].present?\n  ip_address = Socket.ip_address_list.find(&amp;:ipv4_private?).ip_address\n\n  # app host\n  Capybara.app_host = \"http://#{ip_address}\"\n\n  # server host\n  Capybara.server_host = ip_address\nend\n\n# rspec settings\nRSpec.configure do |config|\n  # \u524d\u56de\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u306f\u6b8b\u3055\u306a\u3044\n  config.before(:all, type: :system) do\n    FileUtils.rm_rf Capybara.save_path\n  end\n\n  config.before(:each, type: :system) do\n    if ENV[\"CHROME_URL\"].present?\n      # timeout\u3092\u8a2d\u5b9a\u3059\u308b\u306e\u304c\u91cd\u8981\u3002GitLab CI\u304c\u307b\u307c\u5fc5\u305a\u843d\u3061\u308b\u306e\u3092\u56de\u907f\u3067\u304d\u308b\u3002\n      options = {\n        browser_options: { 'no-sandbox': nil },\n        timeout: 20,\n        url: ENV[\"CHROME_URL\"],\n      }\n      driven_by(:cuprite, screen_size: [800, 600], options: options)\n    elsif ENV[\"BROWSER\"].present?\n      driven_by(:cuprite, screen_size: [800, 600])\n    else\n      driven_by(:rack_test)\n    end\n  end\nend\n</code></pre> <p>Evil Martian\u306e\u8a18\u4e8b\u3082\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\u30b5\u30dd\u30fc\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\u3002 \u3068\u308a\u3042\u3048\u305a\u3053\u308c\u3092\u5165\u308c\u308c\u3070\u52d5\u304f\u3002 \u3088\u304f\u3042\u308b<code>type: :system, js: true</code>\u307f\u305f\u3044\u306a\u66f8\u304d\u65b9\u306f\u3057\u3066\u3044\u306a\u3044\u3002 \u6975\u529b\u540c\u3058\u30c6\u30b9\u30c8\u3067JavaScript\u3042\u308a\u3068\u306a\u3057\u306e\u72b6\u614b\u3092\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002 \u305f\u3060\u3057\u9577\u3044\u76ee\u3067\u898b\u308b\u3068\u7834\u7dbb\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u305d\u3053\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3002</p> <pre><code># rack_test\u306e\u307f\u306e\u30c6\u30b9\u30c8\n$ rspec\n\n# \u30b7\u30b9\u30c6\u30e0\u306eChrome\u3068cuprite\u3067\u30c6\u30b9\u30c8\n$ BROWSER=1 rspec\n\n# Docker\u3068GitLab CI\u3067\u30c6\u30b9\u30c8\n$ docker-compose run --rm web rspec\n</code></pre> <p>\u30ed\u30fc\u30ab\u30eb\u3067\u4f7f\u3046\u306e\u306f\u3053\u306e2\u7a2e\u985e\u3002 \u57fa\u672c\u7684\u306b\u306f\u30d5\u30c3\u30c8\u30d7\u30ea\u30f3\u30c8\u306e\u8efd\u3044<code>rack_test</code>\u524d\u63d0\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3002 CI\u3067\u5931\u6557\u3057\u305f\u3089<code>BROWSER=1</code>\u3068\u3044\u3046\u74b0\u5883\u5909\u6570\u3067cuprite\u3092\u6709\u52b9\u306b\u3059\u308b\u3002</p> docker-compose.yml<pre><code>version: \"3\"\n\nservices:\n  web:\n    build: .\n    environment:\n      - BROWSER=true\n      - CHROME_URL=http://chrome:3000\n      - RAILS_ENV=test\n    volumes:\n      - .:/web\n    depends_on:\n      - chrome\n\n  chrome:\n    image: browserless/chrome:latest\n    container_name: chrome\n</code></pre> <p>Docker\u3067\u306f\u5c11\u306a\u304f\u3068\u3082Ruby\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u30d6\u30e9\u30a6\u30b6\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u306e\u3067\u3001\u5225\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5229\u7528\u3059\u308b\u3002 Browserless\u304c\u3088\u3055\u305d\u3046\u3060\u3002 \u7d14\u7c8b\u306aChrome\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u306f\u306a\u3055\u305d\u3046\u3060\u3051\u308c\u3069\u3082\u3001\u81ea\u5206\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u30d3\u30eb\u30c9\u3059\u308b\u624b\u9593\u3092\u7701\u3051\u308b\u3002</p> .gitlab-ci.yml<pre><code>rspec:\n  image: \"$CI_REGISTRY_IMAGE\"\n  variables:\n    RAILS_ENV: test\n  script:\n    - bundle exec rails db:prepare\n    - bundle exec rspec\n\nrspec system:\n  image: \"$CI_REGISTRY_IMAGE\"\n  variables:\n    CHROME_URL: http://browserless-chrome:3000\n    RAILS_ENV: test\n  services:\n    - browserless/chrome:latest\n  script:\n    - bundle exec rails db:prepare\n    - bundle exec rspec spec/system\n</code></pre> <p>GitLab\u5074\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3053\u308c\u3060\u3051\u3002 \u6ce8\u610f\u3059\u3079\u304d\u306a\u306e\u306f<code>alias</code>\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u30db\u30b9\u30c8\u540d\u304c<code>browserless-chrome</code>\u306b\u306a\u308b\u3053\u3068\u3002 \u3042\u308b\u3044\u306f<code>browserless__chrome</code>\u3092\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002 \u3067\u3082\u3053\u308c\u3060\u3051\u3067System\u30c6\u30b9\u30c8\u304c\u52d5\u304b\u305b\u308b\u306e\u3060\u304b\u3089\u3084\u3063\u3071\u308a\u4fbf\u5229\u3060\u3002</p>"},{"location":"cuprite/#capybara-screenshot","title":"Capybara-Screenshot","text":"<p>capybara-screenshot</p> <p>Ferrum/Cuprite\u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u306a\u3044\u304c\u3042\u308b\u3068\u4fbf\u5229\u3002 \u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3060\u3051\u3067\u306f\u306a\u304fHTML\u3082\u66f8\u304d\u51fa\u3057\u3066\u304f\u308c\u308b\u3002</p> <p><code>rack_test</code>\u306e\u30c7\u30d0\u30c3\u30b0\u3060\u3068\u4fee\u6b63\u7b87\u6240\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3002</p>"},{"location":"cuprite/#url","title":"\u53c2\u8003\u306b\u3057\u305fURL","text":"<ul> <li>Rails\u3067\u30d6\u30e9\u30a6\u30b6\u30c6\u30b9\u30c8\u3092\u300c\u6b63\u3057\u304f\u300d\u884c\u3046\u65b9\u6cd5\uff08\u7ffb\u8a33\uff09<ul> <li>\u5148\u7a0b\u306eEvil Martian\u306e\u7ffb\u8a33\u8a18\u4e8b\u3002</li> </ul> </li> <li>Rails System Tests In Docker</li> <li>How to implement Cuprite into Capybara</li> </ul>"},{"location":"kredis/","title":"Kredis","text":"<p>Web Worker\u306b\u3082\u66f8\u3044\u3066\u3044\u308b\u304c\u3001Sidekiq\u306e\u30b8\u30e7\u30d6\u306b\u9032\u6357\u3092\u8868\u793a\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u308b\u3002 \u4f8b\u3048\u3070Node.js\u306eBull\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u306f\u3042\u3089\u304b\u3058\u3081\u30d7\u30ed\u30b0\u30ec\u30b9\u306e\u8868\u793a\u6a5f\u80fd\u304c\u5229\u7528\u3067\u304d\u308b\u3002 \u826f\u304f\u3082\u60aa\u304f\u3082Sidekiq\u306b\u306f\u305d\u3053\u307e\u3067\u89aa\u5207\u306a\u6a5f\u80fd\u306f\u306a\u3044\u305f\u3081\u3001\u81ea\u5206\u3067\u8db3\u308a\u306a\u3044\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002</p> <p>\u4e00\u5ea6\u3060\u3051\u3084\u3063\u305f\u3053\u3068\u306f\u3042\u308b\u306e\u3067\u3067\u304d\u306a\u304f\u3082\u306a\u3044\u306e\u3060\u304c\u3001Rails\u3067Redis\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u76f4\u63a5\u547c\u3073\u51fa\u3059\u306e\u306f\u5c11\u3005\u7121\u9aa8\u3059\u304e\u308b\u3002</p> <p>\u305d\u3053\u3067\u5c11\u3057\u8abf\u3079\u308b\u3068\u3001Rails\u304c\u30ea\u30ea\u30fc\u30b9\u3057\u3066\u3044\u308bkredis\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u3088\u3046\u3060\u3002 \u4eca\u56de\u306f\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u3066\u3044\u304f\u3002</p> <p>\u4f59\u8ac7\u3060\u304cGo Rails\u306e\u30d3\u30c7\u30aa\u3092\u898b\u308b\u9650\u308a\u3067\u306fK-Redis(\u30b1\u30fc\u30ec\u30c7\u30a3\u30b9)\u3067\u306f\u306a\u304fKredis(\u30af\u30ec\u30c7\u30a3\u30b9)\u3068\u767a\u97f3\u3057\u3066\u3044\u305f\u3002</p>"},{"location":"kredis/#_1","title":"\u57fa\u672c","text":"<p>\u307e\u305a\u306fkredis\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002 \u3053\u306e\u6295\u7a3f\u6642\u70b9\u3067\u306f\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u9032\u3081\u308b\u3002</p> <pre><code>kredis (1.5.0)\n</code></pre> <p>README\u306b\u3082\u8a18\u8f09\u304c\u3042\u308b\u304c\u3001<code>./bin/rails kredis:install</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u751f\u6210\u3055\u308c\u305fYAML\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u3002</p> YAML<pre><code># config/redis/shared.yml\nproduction: &amp;production\n  url: &lt;%= ENV.fetch(\"REDIS_URL\", \"redis://127.0.0.1:6379/0\") %&gt;\n  timeout: 1\n\ndevelopment: &amp;development\n  url: &lt;%= ENV.fetch(\"REDIS_URL\", \"redis://127.0.0.1:6379/0\") %&gt;\n  timeout: 1\n\n  # You can also specify host, port, and db instead of url\n  # host: &lt;%= ENV.fetch(\"REDIS_SHARED_HOST\", \"127.0.0.1\") %&gt;\n  # port: &lt;%= ENV.fetch(\"REDIS_SHARED_PORT\", \"6379\") %&gt;\n  # db: &lt;%= ENV.fetch(\"REDIS_SHARED_DB\", \"11\") %&gt;\n\ntest:\n  &lt;&lt;: *development\n  db: &lt;%= ENV.fetch(\"REDIS_SHARED_DB\", \"1\") %&gt;\n</code></pre> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u751f\u6210\u3055\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u306fdevelopment\u74b0\u5883\u3068test\u74b0\u5883\u3067\u540c\u3058DB\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u306e\u3067\u30c6\u30b9\u30c8\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u304c\u5909\u308f\u3063\u3066\u3057\u307e\u3046\u306e\u3092\u9632\u3050\u305f\u3081\u306b<code>db</code>\u3092\u6307\u5b9a\u3059\u308b\u3002</p>"},{"location":"kredis/#_2","title":"\u30e2\u30c7\u30eb\u306e\u5b9a\u7fa9","text":"Ruby<pre><code>class Item &lt; ApplicationRecord\n  kredis_integer :progress\nend\n</code></pre> <p>SQL\u306e\u3088\u3046\u306bmigration\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u306e\u3067\u3001\u30e2\u30c7\u30eb\u306b\u76f4\u63a5<code>kredis_</code>+\u578b\u3092\u6307\u5b9a\u3059\u308b\u3002 \u6700\u521d\u306f<code>kredis_counter</code>\u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u304c\u3001<code>increment</code>\u3042\u308b\u3044\u306f<code>set</code>\u3057\u304b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067<code>kredis_integer</code>\u306b\u3057\u305f\u3002</p> <p>\u307e\u305f\u30e2\u30c7\u30eb\u7d4c\u7531\u3067\u4f7f\u3046\u5834\u5408\u306f\u3059\u3067\u306bDB\u306b\u30b3\u30df\u30c3\u30c8\u3055\u308c\u3066\u3044\u308b\u72b6\u614b\u3067\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002 \u521d\u671f\u5316\u3057\u305f\u3060\u3051\u306e\u30e2\u30c7\u30eb\u3067<code>progress</code>\u3092\u547c\u3073\u51fa\u305d\u3046\u3068\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002</p> Rails Console<pre><code>item = Item.create\n=&gt; #&lt;Item:0x00007f19451bb880 id: 1, progress: nil, created_at: Sat, 14 Oct 2023 19:33:45.245662027 JST +09:00, updated_at: Sat, 14 Oct 2023 19:33:45.245662027 JST +09:00&gt;\nitem.progress.value\n  Kredis  (1.1ms)  Connected to shared\n  Kredis Proxy (0.9ms)  GET items:1:progress\n=&gt; nil\n</code></pre> <p>\u6ce8\u610f\u70b9\u3068\u3057\u3066\u306f<code>kredis_integer</code>\u306e\u521d\u671f\u5024\u306f<code>nil</code>\u3067\u3042\u308b\u3002 \u73fe\u5728GitHub\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308bmain\u30d6\u30e9\u30f3\u30c1\u3067\u306f<code>kredis_integer :progress, default: 0</code>\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002 kredis\u306e\u30ea\u30ea\u30fc\u30b9\u304c\u5f85\u3061\u9060\u3057\u3044\u304c\u3001<code>to_i</code>\u3067\u3082\u56de\u907f\u3067\u304d\u308b\u306e\u3067\u305d\u3053\u307e\u3067\u81f4\u547d\u7684\u306a\u3082\u306e\u3067\u3082\u306a\u3044\u3002</p> <p>UPDATE: \u5e78\u3044\u306a\u3053\u3068\u306b1.6.0\u304c\u65e9\u304f\u3082\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3002\u3042\u308a\u304c\u3068\u3046DHH\u3002</p> Rails Console<pre><code>item.progress.value = 1\n  Kredis Proxy (0.4ms)  SET items:1:progress [1]\n=&gt; 1\nitem.progress.value\n  Kredis Proxy (0.3ms)  GET items:1:progress\n=&gt; 1\n</code></pre> <p><code>value=</code>\u3042\u308b\u3044\u306f<code>value</code>\u3067\u5024\u3092\u53c2\u7167\u3067\u304d\u308b\u3002</p> Rails Console<pre><code>item.progress.key\n=&gt; \"items:1:progress\"\n</code></pre> <p><code>key</code>\u306f\u5b9f\u969b\u306bRedis\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u30ad\u30fc\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002</p> Rails Console<pre><code>redis = Redis.new(host: 'localhost', port: 6379)\n=&gt; #&lt;Redis client v5.0.7 for redis://localhost:6379/0&gt;\nredis.keys('*').include?(item.progress.key)\n=&gt; true\n</code></pre> <p>\u898b\u305f\u3068\u3053\u308dSidekiq\u306e\u30ad\u30fc\u3068\u885d\u7a81\u306f\u3057\u306a\u3044\u3068\u601d\u3046\u304c\u3001\u3072\u3087\u3063\u3068\u3059\u308b\u3068<code>kredis/items:1:progress</code>\u3068\u304b\u306b\u66f8\u304d\u63db\u3048\u305f\u307b\u3046\u304c\u5b89\u5168\u304b\u3082\u3057\u308c\u306a\u3044\u3002</p>"},{"location":"kredis/#sqlite","title":"SQLite\u3068\u306e\u6bd4\u8f03","text":"<p>\u3082\u3068\u3082\u3068\u306f\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066<code>integer</code>\u306e\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3057\u3066\u3001\u90fd\u5ea6<code>update</code>\u3057\u3066\u3044\u304f\u5b9f\u88c5\u3060\u3063\u305f\u3002 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5024\u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3044\u304f\u306e\u3082\u60aa\u304f\u306f\u306a\u3044\u306e\u3060\u304c\u3001\u5358\u7d14\u306b<code>UPDATE</code>\u3092\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3082\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u308b\u304b\u3089\u5b89\u5168\u3067\u3042\u308b\u53cd\u9762\u3084\u3063\u3071\u308a\u6642\u9593\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u611f\u3058\u306f\u5426\u3081\u306a\u3044\u3002</p> <p>\u4eca\u56de\u306fbenchmark-ips\u3068\u3044\u3046gem\u3092\u5229\u7528\u3059\u308b\u3002</p> <p><code>Item</code>\u30af\u30e9\u30b9\u306b<code>progress</code>\u3068\u3044\u3046\u30ab\u30e9\u30e0\u3092\u7528\u610f\u3057\u3066\u3001\u3082\u3046\u7247\u65b9\u306f<code>redis_progress</code>\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304d\u3001\u305d\u308c\u305e\u308c\u6570\u5024\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3068\u304d\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6bd4\u8f03\u3059\u308b\u3002</p> Ruby<pre><code>require \"benchmark/ips\"\n\nActiveRecord::Base.connection.execute &lt;&lt;-SQL\n  CREATE TABLE IF NOT EXISTS items (\n      id INTEGER PRIMARY KEY,\n      progress INTEGER,\n      created_at DATETIME,\n      updated_at DATETIME\n  );\nSQL\n\nclass Item &lt; ApplicationRecord\n  kredis_integer :redis_progress\nend\n\nn = 100\na = Item.create\nb = Item.create\nBenchmark.ips(2) do |x|\n  x.report(\"sqlite\") do\n    n.times do |i|\n      a.update!(progress: i)\n    end\n  end\n\n  x.report(\"kredis\") do\n    n.times do |i|\n      b.redis_progress.value = i\n    end\n  end\n\n  x.compare!\nend\n\nActiveRecord::Base.connection.execute(\"DROP TABLE items;\")\n</code></pre> <p>SQLite3\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305fRails\u306e<code>rails runner</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f:</p> <pre><code>Warming up --------------------------------------\n              sqlite     1.000  i/100ms\n              kredis     5.000  i/100ms\nCalculating -------------------------------------\n              sqlite      2.050  (\u00b1 0.0%) i/s -      5.000  in   2.462847s\n              kredis     64.403  (\u00b110.9%) i/s -    130.000  in   2.051623s\n\nComparison:\n              kredis:       64.4 i/s\n              sqlite:        2.1 i/s - 31.41x  slower\n</code></pre> <p>\u4f53\u611f\u4e0a\u3067\u3082\u5dee\u306f\u3042\u3063\u305f\u304c\u3001\u6570\u5024\u306b\u3057\u3066\u307f\u308b\u3068\u60f3\u50cf\u4ee5\u4e0a\u306b\u5dee\u304c\u3042\u3063\u305f\u3002</p> <p>\u3053\u3053\u307e\u3067\u5dee\u304c\u3042\u308b\u3068\u3084\u306f\u308aSQLite\u3088\u308a\u3082Redis\u3067\u30d7\u30ed\u30b0\u30ec\u30b9\u3092\u7ba1\u7406\u3059\u308b\u65b9\u304c\u3088\u3055\u305d\u3046\u306a\u6c17\u304c\u3059\u308b\u3002</p>"},{"location":"kredis/#redis","title":"Redis\u3068\u306e\u6bd4\u8f03","text":"<p>\u3067\u306f\u76f4\u63a5Redis\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u6bd4\u8f03\u3059\u308b\u3068\u3069\u3046\u3060\u308d\u3046\u304b\u3002</p> <p>\u3069\u3061\u3089\u3082\u30c6\u30fc\u30d6\u30eb\u540d\u306f\u540c\u3058\u3060\u304c\u3001<code>RedisItem</code>\u30af\u30e9\u30b9\u306f\u30af\u30e9\u30b9\u5909\u6570\u306bRedis\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7528\u610f\u3057\u3066\u304a\u304d\u3001<code>get</code>\u3042\u308b\u3044\u306f<code>set</code>\u3067\u5024\u306e\u66f4\u65b0\u3068\u53d6\u5f97\u3092\u7e70\u308a\u8fd4\u3059\u3002</p> Ruby<pre><code>require \"benchmark/ips\"\n\nActiveRecord::Base.connection.execute &lt;&lt;-SQL\n  CREATE TABLE IF NOT EXISTS items (\n      id INTEGER PRIMARY KEY,\n      created_at DATETIME,\n      updated_at DATETIME\n  );\nSQL\n\nclass RedisItem &lt; ApplicationRecord\n  self.table_name = \"items\"\n\n  @@redis = Redis.new(host: \"localhost\", port: 6379)\n\n  def progress\n    @@redis.get(\"redis_item:#{id}:progress\")\n  end\n\n  def progress=(value)\n    @@redis.set(\"redis_item:#{id}:progress\", value)\n  end\nend\n\nclass KredisItem &lt; ApplicationRecord\n  self.table_name = \"items\"\n\n  kredis_integer :progress\nend\n\nn = 100\nr = RedisItem.create\nk = KredisItem.create\nBenchmark.ips(2) do |x|\n  x.report(\"redis\") do\n    n.times do |i|\n      r.progress = i\n      r.progress.to_i\n    end\n  end\n\n  x.report(\"kredis\") do\n    n.times do |i|\n      k.progress.value = i\n      k.progress.value.to_i\n    end\n  end\n\n  x.compare!\nend\n\nActiveRecord::Base.connection.execute(\"DROP TABLE items;\")\n</code></pre> <p>\u65e9\u901f\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046:</p> <pre><code>Warming up --------------------------------------\n               redis     5.000  i/100ms\n              kredis     2.000  i/100ms\nCalculating -------------------------------------\n               redis     50.752  (\u00b117.7%) i/s -    100.000  in   2.030080s\n              kredis     27.670  (\u00b114.5%) i/s -     54.000  in   2.001809s\n\nComparison:\n               redis:       50.8 i/s\n              kredis:       27.7 i/s - 1.83x  slower\n</code></pre> <p>\u304a\u3088\u305d2\u500d\u8fd1\u304f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5dee\u304c\u51fa\u308b\u3088\u3046\u3060\u3063\u305f\u3002 \u3053\u306e\u5024\u3092\u5927\u304d\u3044\u3068\u6349\u3048\u308b\u304b\u3001\u3042\u308b\u3044\u306f\u5c0f\u3055\u3044\u3068\u6349\u3048\u308b\u304b\u306e\u9055\u3044\u3060\u3002</p> <p>\u305d\u3053\u307e\u3067\u8907\u96d1\u3067\u3082\u306a\u3044\u306e\u3067\u81ea\u5206\u3067\u5b9f\u88c5\u3057\u3066\u3082\u826f\u3044\u6c17\u3082\u3059\u308b\u3002 \u3057\u304b\u3057SQLite\u306e\u5dee\u307b\u3069\u5927\u304d\u304f\u306f\u611f\u3058\u306a\u3044\u3057\u3001\u6975\u529bRedis\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u610f\u8b58\u3057\u305f\u304f\u306f\u306a\u3044\u306e\u3067\u79c1\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63a1\u7528\u3059\u308b\u65b9\u3092\u9078\u3093\u3060\u3002</p>"},{"location":"rclone/","title":"Rclone","text":"<p>Rails\u306a\u3069\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5225\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3078\u79fb\u52d5\u3057\u305f\u3044\u5834\u5408\u306f<code>docker cp</code>\u30b3\u30de\u30f3\u30c9\u306a\u3069\u3092\u5229\u7528\u3057\u3066\u3044\u305f\u306e\u3060\u3051\u308c\u3069\u3082\u3001\u3088\u3046\u3084\u304fRclone\u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u306b\u843d\u3061\u7740\u3044\u305f\u3002 \u3053\u308c\u306f\u8907\u6570\u306e\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u5fdc\u3057\u3066\u304a\u308a\u3001Minio\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u3082\u4f7f\u3048\u308b\u3088\u3046\u3060\u3002</p>"},{"location":"rclone/#_1","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>$ sudo apt install rclone\n</code></pre>"},{"location":"rclone/#rclone-config","title":"<code>rclone config</code>","text":"<pre><code>$ rclone config\nn/s/q&gt; n\nname&gt; minio\nStorage&gt; 4\nprovider&gt; 7\nenv_auth&gt; 1\naccess_key_id&gt; USWUXHGYZQYFYFFIT3RE\nsecret_access_key&gt; MOJRH0mkL1IPauahWITSVvyDrQbEEIwljvmxdq03\nregion&gt; 1\nendpoint&gt; http://192.168.1.106:9000\nserver_side_encryption&gt; 1\nsse_kms_key_id&gt; 1\nEdit advanced config? (y/n)\ny) Yes\nn) No (default)\ny/n&gt; n\n</code></pre> <p>\u51fa\u529b\u3092\u3060\u3044\u3076\u7701\u7565\u3057\u3066\u3044\u308b\u304c\u3001\u5bfe\u8a71\u7684\u306a\u51e6\u7406\u3067\u5165\u529b\u3057\u3066\u3044\u3051\u3070\u3088\u3044\u3002 Storage\u30924\u306b\u3057\u3066provider\u304c7\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3042\u3068\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u9069\u5f53\u306b\u9032\u3081\u3066\u3044\u304f\u3060\u3051\u3060\u3002</p> <p><code>rclone config show</code>\u30b3\u30de\u30f3\u30c9\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u3060\u3002</p> <pre><code>$ rclone config show\n[minio]\ntype = s3\nprovider = Minio\nenv_auth = false\naccess_key_id = USWUXHGYZQYFYFFIT3RE\nsecret_access_key = MOJRH0mkL1IPauahWITSVvyDrQbEEIwljvmxdq03\nendpoint = http://192.168.1.106:9000\nbucket_acl = private\n</code></pre>"},{"location":"rclone/#minioacl","title":"Minio\u5074\u306eACL","text":"JSON<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::satonocrown\"\n      ]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::satonocrown/*\"\n      ]\n    }\n  ]\n}\n</code></pre> <p>\u4eca\u56de\u306f<code>satonocrown</code>\u3068\u3044\u3046bucket\u3092\u4f5c\u6210\u3057\u305f\u3002 \u81ea\u5206\u306ebucket\u306e\u7bc4\u56f2\u5185\u3067\u306a\u3089\u57fa\u672c\u7684\u306b\u4f55\u3067\u3082\u8a31\u53ef\u3059\u308b\u3068\u3044\u3063\u305f\u30a4\u30e1\u30fc\u30b8\u3060\u3002</p>"},{"location":"rclone/#rclone-listremotes","title":"<code>rclone listremotes</code>","text":"<pre><code>$ rclone listremotes\nminio:\n</code></pre> <p>\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002</p>"},{"location":"rclone/#rclone-listremotes_1","title":"<code>rclone listremotes</code>","text":"<pre><code>$ rclone listremotes\nminio:\n</code></pre>"},{"location":"rclone/#rclone-lsd","title":"<code>rclone lsd</code>","text":"<p>\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002</p> <pre><code>$ rclone lsd minio:\n          -1 2023-10-26 17:48:13        -1 satonocrown\n</code></pre> <p>\u4ed6\u306b\u3082<code>ls</code>\u3001<code>lsf</code>\u306a\u3069\u304c\u4f7f\u3048\u308b\u3088\u3046\u3060\u3002 <code>lsd</code>\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u307f\u3067<code>lsf</code>\u306f\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3001<code>ls</code>\u306f\u3069\u3061\u3089\u3082\u53d6\u5f97\u3067\u304d\u308b\u3002 \u3055\u304d\u307b\u3069\u306eACL\u3082\u3053\u3053\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002</p>"},{"location":"rclone/#rclone-copy","title":"<code>rclone copy</code>","text":"<p>\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3002</p> <pre><code>$ rclone copy ./satonocrown/public/uploads/ minio:satonocrown/uploads\n</code></pre> <p>Minio\u306e\u30d6\u30e9\u30a6\u30b6\u7d4c\u7531\u3067\u78ba\u8a8d\u3059\u308b\u3068Rails\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30b3\u30d4\u30fc\u3067\u304d\u3066\u3044\u305f\u3002</p>"},{"location":"ruby-on-rails/","title":"Ruby on Rails","text":"<p>Rails\u5168\u822c</p>"},{"location":"ruby-on-rails/#field_with_errors","title":"<code>field_with_errors</code>\u30af\u30e9\u30b9\u3092\u6d88\u3059","text":"<p>\u30d5\u30a9\u30fc\u30e0\u3067validation\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3068\u65b0\u3057\u3044<code>div</code>\u3067\u56f2\u308f\u308c\u3066\u3057\u307e\u3046\u3002</p> <p>\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u5d29\u308c\u308b\u306e\u3092\u3068\u308a\u3042\u3048\u305a\u9632\u304e\u305f\u3044:</p> Ruby<pre><code>ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|\n  html_tag.html_safe\nend\n</code></pre> <p>\u53c2\u8003URL: Remove Rails field_with_errors wrapper</p>"},{"location":"ruby-on-rails/#rails-consoleirb","title":"Rails Console(IRB)\u306e\u5019\u88dc\u3092\u8868\u793a\u3057\u306a\u3044","text":"<p>Ruby 3\u7cfb\u3060\u3068\u3001Rails Console(IRB)\u306e\u5165\u529b\u4e2d\u306b\u5019\u88dc\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002</p> <pre><code>                 APP_PATH             \u2588\n                 ARGF                 \u2588\n                 ARGV                 \u2588\n                 AbstractController   \u2588\n                 ActionCable          \u2588\n                 ActionController     \u2588\n                 ActionDispatch       \u2588\n                 ActionPack           \u2588\n                 ActionView           \u2588\n                 ActiveJob\n                 Addrinfo\n</code></pre> <p>\u5019\u88dc\u8868\u793a\u305d\u306e\u3082\u306e\u306f\u5fc5\u8981\u3060\u3068\u601d\u3046\u306e\u3060\u304c\u3001\u30bf\u30a4\u30d4\u30f3\u30b0\u306e\u9014\u4e2d\u306b\u51fa\u3059\u5fc5\u8981\u306f\u306a\u3044\u3068\u601d\u3046\u3002</p> <p>\u305d\u308c\u3069\u3053\u308d\u304bIRB\u306e\u8868\u793a\u3082\u3069\u3053\u304b\u30d0\u30b0\u3063\u307d\u304f\u3066\u3001\u3053\u306e\u8868\u793a\u306e\u305b\u3044\u3067\u5165\u529b\u3057\u3066\u3044\u308b\u6587\u5b57\u304c\u6d88\u3048\u308b\u3068\u3044\u3046\u81f4\u547d\u7684\u306a\u30d0\u30b0\u304c\u3042\u308b\u3002 \u3053\u3046\u3044\u3046\u306e\u306fPRY\u3068\u304b\u306egem\u3067\u30aa\u30d7\u30c8\u30a4\u30f3\u3059\u308b\u3079\u304d\u3067\u3042\u3063\u3066\u3001IRB\u306f\u53ef\u80fd\u306a\u9650\u308a\u5358\u7d14\u3067\u3044\u3066\u307b\u3057\u304b\u3063\u305f\u3002 \u3068\u306f\u3044\u3048\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u53ef\u80fd\u306a\u306e\u3067\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b<code>.irbrc</code>\u3092\u4f5c\u6210\u3059\u308b\u3002</p> ~/.irbrc<pre><code>IRB.conf[:USE_AUTOCOMPLETE] = false\n</code></pre> <p>\u3068\u3066\u3082\u3088\u304f\u306a\u3063\u305f\u3002</p> <p>\u4e00\u5fdc\u74b0\u5883\u5909\u6570\u3067\u3082\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u3060\u3002</p> ~/.bashrc<pre><code>export IRB_USE_AUTOCOMPLETE=false\n</code></pre>"},{"location":"ruby-on-rails/#rails-consoleirb_1","title":"Rails Console(IRB)\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u65b9\u6cd5","text":"<p>\u305b\u3063\u304b\u304f<code>.irbrc</code>\u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u53e4\u304d\u826f\u304dIRB\u306b\u3059\u308b\u3002</p> ~/.irbrc<pre><code># \u30b7\u30f3\u30d7\u30eb\u306a\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u4f7f\u3046\nIRB.conf[:PROMPT][:MY_PROMPT] = {\n  :PROMPT_I =&gt; \"&gt;&gt; \",\n  :PROMPT_S =&gt; \"?&gt; \",\n  :PROMPT_C =&gt; \"-&gt; \",\n  :RETURN =&gt; \"=&gt; %s\\n\"\n}\nIRB.conf[:PROMPT_MODE] = :MY_PROMPT\n</code></pre> <p>\u3053\u306e\u8868\u793a\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u3044\u3044\u306e\u306b\u3002</p> <pre><code>$ rails c\nLoading development environment (Rails 7.0.8)\n&gt;&gt;\n</code></pre> <p>\u975e\u5e38\u306b\u3088\u304f\u306a\u3063\u305f\u3002</p>"},{"location":"ruby-on-rails/#railsrc","title":"<code>.railsrc</code>","text":"<p>\u3068\u3066\u3082\u4eca\u66f4\u3067\u306f\u3042\u308b\u306e\u3060\u304c\u3001\u6bce\u56de<code>rails new</code>\u3059\u308b\u3068\u304d\u306b\u5fc5\u305a<code>-T</code>\u306a\u3069\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002 MiniTest\u306f\u307e\u3060\u3088\u3044\u306e\u3060\u304c\u3001<code>--skip-action-mailbox</code>\u306a\u3069\u306f\u5927\u6587\u5b57\u3067\u7701\u7565\u3067\u304d\u306a\u3044\u306e\u3067\u5927\u62b5\u306f<code>rails new --minimal</code>\u304b<code>rails new --help</code>\u3067\u4e00\u89a7\u304b\u3089\u3044\u3061\u3044\u3061\u9078\u629e\u3057\u3066\u3044\u305f\u3002</p> <p>\u3042\u307e\u308a\u6c17\u306b\u7559\u3081\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3060\u304c\u3001<code>.irbrc</code>\u304c\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308b\u3053\u3068\u3092\u8003\u3048\u308b\u3068<code>.railsrc</code>\u3082\u540c\u69d8\u306b\u3042\u3063\u3066\u3082\u3088\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3048\u3066\u304d\u305f\u3002</p> ~/.railsrc<pre><code>--database=postgresql\n--skip-keeps\n--skip-action-mailer\n--skip-action-mailbox\n--skip-action-text\n--skip-active-storage\n--skip-jbuilder\n--skip-test\n</code></pre> <p>\u3068\u308a\u3042\u3048\u305a\u307b\u307c\u6bce\u56de\u9078\u3076\u3067\u3042\u308d\u3046\u9078\u629e\u80a2\u3092\u9078\u3093\u3060\u3002</p> <p>\u4ee5\u4e0b\u306f\u9078\u629e\u3057\u305f\u30b3\u30e1\u30f3\u30c8:</p> <p><code>--database=postgresql</code></p> <p>\u3053\u3053\u6700\u8fd1\u306fPostgres\u3067\u306f\u306a\u304fSQLite\u3067\u66f8\u304d\u59cb\u3081\u308b\u3053\u3068\u304c\u591a\u3044\u3002 <code>db:system:change</code>\u304c\u3042\u308b\u3068\u306f\u3044\u3048\u3001\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306b\u306f\u5fc5\u305aPostgres\u306b\u5909\u66f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u306e\u3067\u6307\u5b9a\u3057\u3066\u304a\u304f\u3002 \u5358\u7d14\u306b\u6bce\u56de<code>-d=postgresql</code>\u3092\u30bf\u30a4\u30d7\u3059\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u3060\u3051\u304b\u3082\u3057\u308c\u306a\u3044\u3002</p> <p><code>--skip-keeps</code></p> <p>\u3053\u308c\u306f\u9006\u306b\u4eca\u56de\u304b\u3089\u63a1\u7528\u3059\u308b\u3053\u3068\u306b\u6c7a\u3081\u305f\u3002 <code>tmp</code>\u3068\u304b<code>log</code>\u3092GitLab\u306b\u8868\u793a\u3057\u3066\u304a\u304d\u305f\u3044\u304b\u3089\u6b8b\u3057\u3066\u3044\u305f\u306e\u3067\u3053\u308c\u306f<code>--no-skip-keeps</code>\u306b\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002</p> <p><code>--skip-action-mailer</code></p> <p>ActionMailer\u306f\u3044\u3064\u304b\u306f\u4f7f\u3044\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u3060\u3044\u305f\u3044\u306f\u5225\u306e\u624b\u6bb5\u306b\u843d\u3061\u7740\u304f\u3002</p> <p><code>--skip-action-mailbox</code></p> <p>\u6b63\u76f4\u8208\u5473\u306f\u3042\u308b\u3082\u306e\u306e\u3001ActionMailer\u4f7f\u308f\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u63a1\u7528\u3059\u308b\u7406\u7531\u306f\u306a\u3044\u3002</p> <p><code>--skip-action-text</code></p> <p>Trix\u306f\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u5f53\u6642\u306f\u975e\u5e38\u306b\u30cb\u30fc\u30ba\u3092\u6349\u3048\u3066\u3044\u308b\u3068\u601d\u3063\u3066\u3044\u305f\u3002 \u305f\u3060\u3057\u6bce\u56de\u30d6\u30ed\u30b0\u3092\u4f5c\u308a\u305f\u3044\u308f\u3051\u3067\u306f\u306a\u3044\u3057\u3001\u3082\u3057\u30d6\u30ed\u30b0\u3092\u4f5c\u308b\u3068\u3057\u3066\u3082Markdown\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305f\u3044\u3068\u601d\u3046\u3002 \u305d\u3046\u306a\u308b\u3068Trix\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3046\u6a5f\u4f1a\u306f\u306a\u304b\u306a\u304b\u60f3\u5b9a\u3067\u304d\u306a\u3044\u3002 \u3082\u3046\u5c11\u3057\u30af\u30bb\u306e\u306a\u3044\u30a8\u30c7\u30a3\u30bf\u306a\u3089\u307e\u305f\u9055\u3063\u305f\u6349\u3048\u65b9\u3060\u3063\u305f\u304b\u3082\u3057\u308c\u306a\u3044\u3002</p> <p><code>--skip-active-storage</code></p> <p>ActiveStorage\u306f\u4e00\u6642\u671f\u4f7f\u304a\u3046\u3068\u3057\u3066\u3044\u305f\u306e\u3060\u304c\u3001\u3084\u306f\u308aCarrierWave\u306e\u307b\u3046\u304c\u79c1\u306f\u597d\u304d\u3060\u3002 \u3053\u308c\u3082\u5c06\u6765\u7684\u306b\u3053\u306e\u4e2d\u306b\u542b\u307e\u308c\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u306f\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001<code>rails routes</code>\u304c\u6c5a\u67d3\u3055\u308c\u308b\u306e\u304c\u3069\u3046\u3082\u6c17\u306b\u5165\u3089\u306a\u3044\u3002</p> <p><code>--skip-jbuilder</code></p> <p>JBuilder\u306fMVC\u3092\u4f53\u73fe\u3057\u3066\u3044\u308b\u3068\u601d\u3046\u3057\u3001\u3042\u307e\u308a\u5acc\u3044\u3067\u306f\u306a\u3044\u3002 \u3067\u3082JSON\u306f\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u3059\u308b\u307b\u3046\u304c\u3088\u308a\u4e00\u822c\u7684\u3060\u3068\u601d\u3046\u3002</p> <p><code>--skip-test</code></p> <p>\u30df\u30cb\u30de\u30ea\u30b9\u30c8\u3068\u3044\u3046\u611f\u3058\u304c\u3057\u3066\u306f\u304b\u3063\u3053\u3044\u3044\u3002 \u3067\u3082\u305d\u308c\u3060\u3051\u3067\u3042\u308b\u3002 MiniTest\u3067\u3082\u30c6\u30b9\u30c8\u66f8\u3051\u306a\u304f\u306f\u306a\u3044\u3051\u308c\u3069\u3001\u3084\u306f\u308aRSpec\u306b\u6bd4\u3079\u308b\u3068\u308f\u3056\u308f\u3056\u3053\u308c\u3092\u597d\u3093\u3067\u66f8\u304f\u7406\u7531\u306f\u306a\u3044\u3002</p> <p><code>--no-skip-action-cable</code></p> <p>\u3053\u306e\u8a2d\u5b9a\u306f\u30ea\u30b9\u30c8\u306b\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u3051\u308c\u3069\u3082\u3001\u307b\u307c\u5fc5\u305a\u3068\u3044\u3063\u3066\u3044\u3044\u307b\u3069ActionCable\u306f\u9664\u5916\u3057\u3066\u3044\u305f\u8eab\u304b\u3089\u3059\u308b\u3068\u3053\u308c\u306f\u5927\u304d\u306a\u9032\u6b69\u3060\u3068\u601d\u3046\u3002 \u5229\u7528\u3059\u308b\u306b\u306fRedis\u304c\u5fc5\u9808\u3060\u3051\u3069\u3082\u3001Rails\u81ea\u4f53\u306fRedis\u3092\u5168\u304f\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u52d5\u304f\u3002 WebSocket\u3068\u3044\u3046\u306e\u3082\u656c\u9060\u3057\u3066\u3044\u305f\u7406\u7531\u3060\u3051\u308c\u3069\u3082\u3001\u4eca\u5f8cHotwire\u3092\u4f7f\u3063\u3066\u3044\u304d\u305f\u3044\u306e\u304c\u5927\u304d\u3044\u3002</p> <p><code>--template=TEMPLATE</code></p> <p>\u6b63\u76f4\u8a66\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3060\u304c\u3001Gemfile\u306f\u3067\u304d\u308b\u9650\u308a<code>bundle add</code>\u3067\u60b2\u89b3\u7684\u306b\u8ffd\u52a0\u3057\u305f\u3044\u3002 \u305d\u3046\u8003\u3048\u308b\u3068\u4ed6\u306b\u3067\u304d\u305d\u3046\u306a\u3053\u3068\u306f\u5c11\u306a\u3044\u306e\u3067\u30b9\u30eb\u30fc\u3057\u305f\u3002</p>"},{"location":"ruby-on-rails/#rubocopyml","title":".rubocop.yml\u3092\u30b5\u30fc\u30d0\u30fc\u7d4c\u7531\u3059\u308b","text":"<p>\u305f\u307e\u305f\u307eKredis\u306eRuboCop\u3092\u898b\u3066\u3044\u305f\u3089\u8a18\u8ff0\u304c\u305f\u3063\u305f\u306e\u3053\u308c\u3060\u3051\u3067\u3042\u3063\u305f:</p> .rubocop.yml<pre><code>inherit_from: https://raw.githubusercontent.com/rails/rails/main/.rubocop.yml\n</code></pre> <p>\u3053\u308c\u3092\u3084\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u624b\u5143\u306e\u7de8\u96c6\u3092\u3044\u3061\u3044\u3061\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3068\u3044\u3046\u304b\u3001\u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u9593\u3067\u6bce\u56de\u4f3c\u305f\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u3063\u305f\u3002</p> <p>\u554f\u984c\u306f\u3053\u308c\u3092\u3069\u3053\u3067\u7ba1\u7406\u3059\u308b\u304b\u306a\u306e\u304b\u3060\u304c\u3001GitHub\u3067\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u7ba1\u7406\u3057\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070GitHub\u306b\u4efb\u305b\u308b\u306e\u304c\u7406\u306b\u304b\u306a\u3063\u3066\u306f\u3044\u308b\u3002 \u3057\u304b\u3057\u79c1\u306e\u5834\u5408\u306f\u6975\u529bGitHub\u3088\u308a\u3082GitLab\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u7ba1\u7406\u3057\u305f\u3044\u306e\u3067\u3001GitLab\u306eSnippet\u6a5f\u80fd\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u305f\u3002</p> <p>\u3053\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u5c11\u3005\u5384\u4ecb\u306a\u306e\u306f<code>rubocop</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30ed\u30fc\u30ab\u30eb\u306b\u5c11\u3005\u9577\u3044\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u3066\u3057\u307e\u3046\u3088\u3046\u3060:</p> <pre><code>.rubocop-https---raw-githubusercontent-com-rails-rails-main--rubocop-yml\n</code></pre> <p>\u305d\u306e\u305f\u3081VSCode\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305f\u3002</p> settings.json<pre><code>{\n  \"files.exclude\": {\n    \"**/.rubocop-*\": true\n  }\n}\n</code></pre> <p>\u3053\u308c\u306f\u7d50\u69cb\u5f37\u529b\u306a\u8a2d\u5b9a\u3067\u3001Explorer\u304b\u3089\u3082\u9664\u5916\u3059\u308b\u8a2d\u5b9a\u3060\u3002 \u3053\u308c\u3082\u3057\u3070\u3089\u304f\u904b\u7528\u3057\u3066\u307f\u3066\u30ed\u30fc\u30ab\u30eb\u7ba1\u7406\u304c\u3057\u3063\u304f\u308a\u304f\u308b\u306e\u304b\u3001\u3044\u305a\u308c\u7d50\u8ad6\u3092\u51fa\u3057\u305f\u3044\u3068\u601d\u3046\u3002</p>"},{"location":"ruby-on-rails/#svg","title":"SVG\u3092\u8868\u793a\u3059\u308b\u65b9\u6cd5","text":"<p>\u3042\u307e\u308a\u898b\u6163\u308c\u306a\u3044<code>raw</code>\u3068\u3044\u3046\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002</p> icon_helper.rb<pre><code>module IconHelper\n  def svg(file_name)\n    icons_path = Rails.root.join(\"app/assets/icons\").join(file_name)\n    File.open(icons_path) do |f|\n      raw f.read\n    end\n  end\nend\n</code></pre> <p>\u53c2\u8003URL: How do I display SVG image in Rails?</p>"},{"location":"ruby-on-rails/#_1","title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30ed\u30b0\u3092\u96a0\u3059","text":"<p>\u6700\u8fd1\u3067\u306fView Component\u3092\u4f7f\u3048\u3070\u4f3c\u305f\u3088\u3046\u306a\u4e8b\u304c\u3067\u304d\u306a\u304f\u3082\u306a\u3044\u4e8b\u306b\u6c17\u304c\u3064\u3044\u305f\u306e\u3060\u3051\u308c\u3069\u3082\u3001\u30e2\u30c7\u30eb\u306e\u6570\u3060\u3051<code>render</code>\u304c\u547c\u3070\u308c\u308b\u306e\u304c\u9b31\u9676\u3057\u304f\u611f\u3058\u308b\u3002</p> <p>\u3068\u306f\u3044\u3048SQL\u306e\u30ed\u30b0\u3084\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u8868\u793a\u3057\u3066\u304a\u304d\u305f\u3044\u306e\u3067\u6b21\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u3002<code>rails dev:cache</code>\u307f\u305f\u3044\u306b\u30d5\u30a1\u30a4\u30eb\u3067\u5236\u5fa1\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3082\u3088\u3055\u305d\u3046\u3067\u306f\u3042\u308b\u3002</p> config/initializers/action_view.rb<pre><code>Rails.application.config.action_view.logger = nil\n</code></pre> <p>\u53c2\u8003URL: Hide rendering of partials from rails logs</p>"},{"location":"sqlite3/","title":"SQLite3","text":"<p>DB\u306f\u666e\u6bb5GUI\u3067\u3057\u304b\u6271\u308f\u306a\u3044\u306e\u3060\u3051\u308c\u3069\u3082\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u30ea\u30b9\u30c8\u30a2\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u304a\u304f\u3002</p> <p>\u53c2\u8003URL: How To Use The SQLite Dump Command</p>"},{"location":"sqlite3/#_1","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt install sqlite3\n</code></pre>"},{"location":"sqlite3/#dump","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306edump","text":"sqlite3 ./db/development.sqlite3<pre><code>SQLite version 3.37.2 2022-01-06 13:25:41\nEnter \".help\" for usage hints.\nsqlite&gt; .output db/dump.sql\nsqlite&gt; .dump\nsqlite&gt; .exit\n</code></pre>"},{"location":"sqlite3/#dump_1","title":"\u7279\u5b9a\u306e\u30c6\u30fc\u30d6\u30eb\u3092dump","text":"sqlite3 ./db/development.sqlite3<pre><code>SQLite version 3.37.2 2022-01-06 13:25:41\nEnter \".help\" for usage hints.\nsqlite&gt; .output db/videos.sql\nsqlite&gt; .dump videos\nsqlite&gt; .exit\n</code></pre> <p>\u3053\u308c\u3072\u3087\u3063\u3068\u3059\u308b\u3068\u5bfe\u8a71\u578b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3057\u306a\u304f\u3066\u3082\u3044\u3051\u308b\u306e\u3067\u306f\u3068\u3044\u3046\u6c17\u6301\u3061\u3082\u3042\u308b\u3002</p>"},{"location":"sqlite3/#dbseed","title":"\u7279\u5b9a\u306e\u30c6\u30fc\u30d6\u30eb\u3092<code>db:seed</code>\u3067\u30ea\u30b9\u30c8\u30a2","text":"<p>\u3053\u3053\u304b\u3089\u304c\u672c\u984c\u3067\u3042\u308b\u3002</p> <p>\u5148\u7a0b\u306e\u30b3\u30de\u30f3\u30c9\u3067<code>dump.sql</code>\u3042\u308b\u3044\u306f<code>videos.sql</code>\u304c\u53d6\u5f97\u3067\u304d\u305f\u524d\u63d0\u3067\u5b9f\u884c\u3059\u308b\u3002 \u307e\u305a\u306f\u30c6\u30fc\u30d6\u30eb\u5168\u4f53\u3092\u521d\u671f\u5316\u3059\u308b:</p> <pre><code>rails db:drop db:create db:migrate\nDropped database 'db/development.sqlite3'\nDropped database 'db/test.sqlite3'\nCreated database 'db/development.sqlite3'\nCreated database 'db/test.sqlite3'\n== 20231123063711 CreateVideos: migrating =====================================\n-- create_table(:videos)\n   -&gt; 0.0020s\n== 20231123063711 CreateVideos: migrated (0.0027s) ============================\n</code></pre> <p>\u3064\u3065\u3044\u3066seeds.rb\u3092\u6b21\u306e\u3088\u3046\u306b\u66f4\u65b0\u3059\u308b:</p> db/seeds.rb<pre><code>videos_sql = File.read(\"db/videos.sql\")\nresult = ActiveRecord::Base.connection.execute(videos_sql)\n</code></pre> <p><code>rails db:seed</code>\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u6b8b\u5ff5\u306a\u304c\u3089DB\u306f\u30ea\u30b9\u30c8\u30a2\u3067\u304d\u3066\u3044\u306a\u304b\u3063\u305f\u3002</p> <p>\u8a66\u3057\u306b<code>INSERT INTO</code>\u884c\u306e\u307f\u3092\u5b9f\u884c\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u30ec\u30b3\u30fc\u30c9\u306f1\u4ef6\u306e\u307f\u4f5c\u6210\u3055\u308c\u3066\u3044\u305f\u3002\u3064\u307e\u308a\u8907\u6570\u884c\u306f\u5b9f\u884c\u3067\u304d\u306a\u3044\u3088\u3046\u3060\u3002</p> <p>\u5148\u7a0b\u306eseeds.rb\u3092\u4fee\u6b63\u3059\u308b:</p> db/seeds.rb<pre><code>videos_sql = File.read(\"db/videos.sql\")\nvideos_sql.each_line do |sql|\n  if sql.match?(/^INSERT INTO/)\n    ActiveRecord::Base.connection.execute(sql)\n  end\nend\n</code></pre> <p>\u3044\u3044\u611f\u3058\u3060\u3002 \u305f\u307e\u305f\u307e\u4eca\u56de\u306f\u30ea\u30b9\u30c8\u30a2\u5bfe\u8c61\u306e\u30c6\u30fc\u30d6\u30eb\u304c1\u3064\u3057\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u3053\u308c\u3067\u5341\u5206\u3060\u3002</p> <p>\u53c2\u8003URL: Execute SQL-Statement from File with ActiveRecord</p>"},{"location":"ubuntu-desktop/","title":"Ubuntu Desktop","text":"<p>Ubuntu\u5168\u822c\u306b\u3064\u3044\u3066</p>"},{"location":"ubuntu-desktop/#imagemagick","title":"ImageMagick\u3092\u6d88\u3059","text":"<pre><code>$ sudo rm /usr/share/applications/display-im6.q16.desktop\n</code></pre> <p>\u8b0e\u306e\u767d\u3044\u30a2\u30a4\u30b3\u30f3\u304c\u6d88\u3048\u308b\u3002 \u5b9f\u884c\u3057\u3066\u307f\u3066\u3082\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u753b\u50cf\u304c\u51fa\u3066\u304f\u308b\u3060\u3051\u3002 imagemagick\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3082\u308c\u306a\u304f\u3064\u3044\u3066\u304f\u308b\u304c\u6d88\u3057\u3066\u554f\u984c\u306a\u3055\u305d\u3046\u3002</p>"},{"location":"ubuntu-desktop/#nip2","title":"nip2\u3092\u6d88\u3059","text":"<pre><code>$ sudo apt purge nip2\n</code></pre> <p>\u3053\u3061\u3089\u306f<code>libvips-dev</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u4e00\u7dd2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308bGUI\u7248?\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3002 \u30a2\u30a4\u30b3\u30f3\u304c\u5fae\u5999\u306a\u306e\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3054\u3068\u6d88\u3059\u3002</p>"},{"location":"ubuntu-desktop/#mpv","title":"mpv\u3092\u6d88\u3059","text":"<pre><code>$ sudo apt purge mpv\n</code></pre> <p><code>yt-dlp</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3068\u304d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u3063\u305f\u3002 \u305d\u3082\u305d\u3082\u8d77\u52d5\u3059\u3089\u3057\u306a\u3044\u3002</p>"},{"location":"web-worker/","title":"Web Worker","text":"<p>Web Worker\u3092\u4f7f\u3046\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u304c\u306a\u304b\u306a\u304b\u898b\u3044\u3060\u305b\u305a\u306b\u3044\u305f\u306e\u3067\u3001\u8208\u5473\u306f\u3042\u3063\u305f\u306e\u3060\u304c\u306a\u304b\u306a\u304b\u4f7f\u3046\u6a5f\u4f1a\u304c\u306a\u304b\u3063\u305f\u3002 \u73fe\u5728\u4f5c\u6210\u3057\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u306f\u3001\u3068\u3044\u3046\u304b\u5927\u62b5\u306fSidekiq\u306e\u30b8\u30e7\u30d6\u3067\u975e\u540c\u671f\u306b\u51e6\u7406\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u9032\u6357\u3092\u8868\u793a\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u3002 \u3044\u305a\u308c\u306fWebSocket\u3082\u4f7f\u3063\u3066\u307f\u305f\u3044\u306e\u3060\u304c\u3001\u307e\u305a\u306fLong Polling\u3067\u5b9f\u88c5\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3046\u3002 \u6700\u521d\u306fSSE(server-sent events)\u3082\u4f7f\u3063\u3066\u307f\u305f\u306e\u3060\u304c\u3001\u3069\u3046\u3082\u5b89\u5b9a\u3057\u306a\u3044\u306e\u304c\u3042\u3063\u3066Long Polling\u306b\u3057\u305f\u3002</p> <p>\u307e\u305aWeb Worker\u306b\u306f\u304a\u304a\u307e\u304b\u306b2\u7a2e\u985e\u306eWorker\u304c\u3042\u308b\u3088\u3046\u3060\u3002</p> <p>1\u3064\u306f\u5c02\u7528Worker(DedicatedWorker)\u3068\u5171\u6709Worker(SharedWorker)\u306b\u5206\u3051\u3089\u308c\u3066\u3044\u308b\u3002 \u82e5\u5e72\u4f7f\u3044\u65b9\u304c\u7570\u306a\u308b\u304c\u3001\u5c02\u7528Worker\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u7d10\u4ed8\u3044\u3066\u3044\u3066\u3001\u5171\u6709Worker\u306f\u30d6\u30e9\u30a6\u30b6\u3067\u5171\u901a\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5229\u7528\u3067\u304d\u308b\u30a4\u30e1\u30fc\u30b8\u3002 \u30b5\u30f3\u30d7\u30eb\u3092\u8a66\u3057\u3066\u307f\u308b\u3068\u5c02\u7528Worker\u306e\u65b9\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7cfb\u306e\u62e1\u5f35\u6a5f\u80fd\u3067\u7121\u52b9\u306b\u3055\u308c\u3066\u3044\u3066\u3001\u3072\u3087\u3063\u3068\u3059\u308b\u3068\u5171\u6709Worker\u306e\u65b9\u304c\u3044\u3064\u3067\u3082\u4f7f\u3048\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u306f\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002 \u3068\u3044\u3063\u3066\u3082\u81ea\u5206\u3067\u4f7f\u3046\u3060\u3051\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306a\u306e\u3067\u4eca\u56de\u306f\u5c02\u7528Worker\u3092\u4f7f\u3046\u3002</p>"},{"location":"web-worker/#_1","title":"\u57fa\u672c","text":"<p>Create a Web Worker File:</p> JavaScript<pre><code>// polling-worker.js\nself.onmessage = function (e) {\n  // This function will handle messages sent to the worker.\n  // You can start the polling process here.\n  poll(e.data.url, e.data.interval);\n};\n\nfunction poll(url, interval) {\n  setInterval(async () =&gt; {\n    try {\n      const response = await fetch(url);\n      if (response.ok) {\n        const data = await response.json();\n        self.postMessage(data); // Send data back to the main thread\n      }\n    } catch (error) {\n      console.error(\"Polling error:\", error);\n    }\n  }, interval);\n}\n</code></pre> <p>Main Thread:</p> JavaScript<pre><code>// main.js\nconst worker = new Worker(\"polling-worker.js\");\n\nworker.onmessage = function (e) {\n  // Handle data received from the worker.\n  const data = e.data;\n  console.log(\"Received data:\", data);\n\n  // You can update your UI or perform any other actions with the data.\n};\n\n// Start the polling process\nconst pollingConfig = {\n  url: \"https://example.com/api/data\", // Replace with your API endpoint\n  interval: 5000, // Polling interval in milliseconds (e.g., 5 seconds)\n};\n\nworker.postMessage(pollingConfig); // Start the polling\n</code></pre> <p>\u4e0a\u8a18\u306fChatGPT\u3092\u5229\u7528\u3057\u3066\u751f\u6210\u3057\u305f\u30b3\u30fc\u30c9\u3060\u3002 <code>main.js</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u5c02\u7528Worker\u306e<code>polling-worker.js</code>\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3002</p> <p>\u5927\u307e\u304b\u306a\u6d41\u308c\u306f<code>main.js</code>\u304b\u3089<code>worker.postMessage</code>\u3092\u547c\u3073\u51fa\u3057\u3066\u3001<code>polling-worker.js</code>\u3067<code>self.onmessage</code>\u306b\u95a2\u6570\u3092\u30bb\u30c3\u30c8\u3059\u308c\u3070\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u9006\u306b<code>polling-worker.js</code>\u5074\u3067\u8a08\u7b97\u3057\u305f\u7d50\u679c\u3001\u4eca\u56de\u306fFetch\u3092\u5b9f\u884c\u3057\u3066\u53d6\u5f97\u3057\u305f\u30ec\u30b9\u30dd\u30f3\u30b9\u3092<code>self.postMessage</code>\u3067\u8fd4\u3057\u3001<code>main.js</code>\u5074\u3067<code>worker.onmessage</code>\u3067\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u306a\u3093\u3068\u306a\u304fWeb Worker\u306f\u96e3\u3057\u305d\u3046\u306b\u601d\u3048\u3066\u3044\u305f\u304c\u3001\u57fa\u672c\u306e\u8003\u3048\u65b9\u306f\u3053\u308c\u3060\u3051\u306a\u306e\u3067\u975e\u5e38\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u3002 <code>console.log</code>\u306a\u3069\u306e\u30c7\u30d0\u30c3\u30b0\u95a2\u6570\u3082\u4f7f\u3048\u308b\u306e\u3067API\u901a\u4fe1\u3092\u3059\u3079\u3066\u3053\u3053\u306b\u96c6\u7d04\u3057\u3088\u3046\u3068\u307e\u3067\u306f\u601d\u308f\u306a\u3044\u304c\u3001\u4eca\u56de\u306e\u3088\u3046\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u306f\u975e\u5e38\u306b\u5408\u81f4\u3059\u308b\u3002</p> <p>\u3053\u306e\u30b3\u30fc\u30c9\u3092\u30d9\u30fc\u30b9\u306b\u6539\u826f\u3057\u3066\u3044\u304f\u3002</p>"},{"location":"web-worker/#vitereact","title":"Vite+React\u3067\u4f7f\u3046","text":"<p>Vite\u3067Web Worker\u3092\u4f7f\u3046\u969b\u306f\u7279\u6b8a\u306aURL\u3092\u4f7f\u7528\u3059\u308b\u3002</p> JavaScript<pre><code>// App.jsx\nimport { useEffect } from \"react\";\n\nfunction App() {\n  useEffect(() =&gt; {\n    if (window.Worker) {\n      const scriptURL = new URL(\"./polling-worker.js\", import.meta.url);\n      const worker = new Worker(scriptURL, { type: \"module\" });\n\n      worker.onmessage = function (e) {\n        // Handle data received from the worker.\n        const data = e.data;\n        console.log(\"Received data:\", data);\n\n        // You can update your UI or perform any other actions with the data.\n      };\n\n      // Start the polling process\n      const pollingConfig = {\n        url: \"https://example.com/api/data\", // Replace with your API endpoint\n        interval: 5000, // Polling interval in milliseconds (e.g., 5 seconds)\n      };\n\n      worker.postMessage(pollingConfig);\n    } else {\n      console.log(\"Your browser does'nt support web workers.\");\n    }\n  }, []);\n\n  return &lt;&gt;&lt;/&gt;;\n}\n\nexport default App;\n</code></pre> <p><code>import.meta.url</code>\u3092\u6e21\u3059\u3053\u3068\u3067Vite\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u6b63\u3057\u304fJS\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u308b\u3002 Worker\u306b<code>{ type: \"module\" }</code>\u3092\u6e21\u3059\u3053\u3068\u3067NPM\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002</p> JavaScript<pre><code>// polling-worker.js\nimport Axios from \"axios\";\n\nself.onmessage = function (e) {\n  // This function will handle messages sent to the worker.\n  // You can start the polling process here.\n  poll(e.data.url, e.data.interval);\n};\n\nfunction poll(url, interval) {\n  setInterval(async () =&gt; {\n    try {\n      const response = await Axios.get(url);\n      if (response) {\n        self.postMessage(response.data); // Send data back to the main thread\n      }\n    } catch (error) {\n      console.error(\"Polling error:\", error);\n    }\n  }, interval);\n}\n</code></pre> <p>\u305f\u3060\u3057\u76f8\u5bfe\u30d1\u30b9\u3067\u66f8\u304b\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3082\u3067\u304d\u308b\u304b\u3068\u601d\u3063\u305f\u3089\u3001\u3053\u3061\u3089\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3002 <code>import axios from './axios?worker'</code>\u307f\u305f\u3044\u306a\u66f8\u304d\u65b9\u304c\u3067\u304d\u308b\u304b\u3068\u601d\u3063\u305f\u304c\u3001\u3053\u308c\u306f\u3042\u304f\u307e\u3067Web Worker\u5074\u306e\u8a18\u8f09\u307f\u305f\u3044\u306a\u306e\u3067\u9055\u3046\u3089\u3057\u3044\u3002 \u3053\u3053\u306f\u308f\u304b\u308a\u6b21\u7b2c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u305f\u3044\u3002</p>"},{"location":"web-worker/#long-polling","title":"Long Polling\u3092\u3068\u3081\u308b","text":"<p>\u304a\u6c17\u3065\u304d\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u3053\u306e\u8a18\u8ff0\u306e\u307e\u307e\u3067\u306f\u30d6\u30e9\u30a6\u30b6\u3092\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u307e\u3067\u306f\u6b62\u307e\u3089\u306a\u3044\u3002 <code>postMessage</code>\u306bbool\u5024\u3092\u6e21\u3057\u3066<code>setInterval</code>\u3092\u89e3\u9664\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002</p> JavaScript<pre><code>// App.jsx\nimport { useEffect } from \"react\";\n\nfunction App() {\n  useEffect(() =&gt; {\n    if (window.Worker) {\n      const scriptURL = new URL(\"./polling-worker.js\", import.meta.url);\n      const worker = new Worker(scriptURL, { type: \"module\" });\n\n      worker.onmessage = function (e) {\n        // Handle data received from the worker.\n        const data = e.data;\n        console.log(\"Received data:\", data);\n\n        // You can update your UI or perform any other actions with the data.\n      };\n\n      // Start the polling process\n      const pollingConfig = {\n        enabled: true,\n        url: \"https://example.com/api/data\", // Replace with your API endpoint\n        interval: 5000, // Polling interval in milliseconds (e.g., 5 seconds)\n      };\n\n      worker.postMessage(pollingConfig);\n\n      return () =&gt; {\n        worker.postMessage({\n          enabled: false,\n        });\n      };\n    } else {\n      console.log(\"Your browser does'nt support web workers.\");\n    }\n  }, []);\n\n  return &lt;&gt;&lt;/&gt;;\n}\n\nexport default App;\n</code></pre> <p>\u3053\u3053\u3067\u306f<code>useEffect</code>\u306e\u8fd4\u308a\u5024\u306b\u95a2\u6570\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001<code>App</code>\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306eCleanup\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u969b\u306b<code>postMessage</code>\u3092\u9001\u308b\u3002</p> JavaScript<pre><code>// polling-worker.js\nimport Axios from \"axios\";\n\nlet pollingIntervalId; // Store the interval ID for later cancellation\n\nself.onmessage = function (e) {\n  // This function will handle messages sent to the worker.\n  // You can start the polling process here.\n  if (e.data.enabled) {\n    pollingIntervalId = poll(e.data.url, e.data.interval);\n  } else {\n    clearInterval(pollingIntervalId);\n  }\n};\n\nfunction poll(url, interval) {\n  return setInterval(async () =&gt; {\n    try {\n      const response = await Axios.get(url);\n      if (response) {\n        self.postMessage(response.data); // Send data back to the main thread\n      }\n    } catch (error) {\n      console.error(\"Polling error:\", error);\n    }\n  }, interval);\n}\n</code></pre> <p>\u30a4\u30e1\u30fc\u30b8\u7684\u306b\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3088\u3044\u3002 \u3053\u306e\u66f8\u304d\u65b9\u306f\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u306e\u304b?\u3068\u3044\u3046\u7591\u554f\u3082\u3042\u3063\u305f\u304c\u3001\u8907\u6570\u30bf\u30d6\u3092\u958b\u3044\u3066\u52d5\u304b\u3057\u3066\u307f\u3066\u3082\u554f\u984c\u306a\u304b\u3063\u305f\u3002 \u304a\u305d\u3089\u304f\u5c02\u7528Worker\u3067\u306f\u3053\u306e\u66f8\u304d\u65b9\u3067\u3082\u3088\u3044\u304c\u3001\u5171\u6709Worker\u3060\u3068\u3053\u306e\u66f8\u304d\u65b9\u3067\u306f\u5bfe\u51e6\u3067\u304d\u306a\u3044\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002 \u4ed6\u306b\u3082\u307e\u3060\u9632\u304e\u304d\u308c\u306a\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u5c11\u306a\u304f\u3068\u3082\u79c1\u306e\u4f7f\u3044\u65b9\u3067\u306f\u554f\u984c\u306a\u3055\u305d\u3046\u3067\u3042\u308b\u3002</p>"},{"location":"web-worker/#usecallback","title":"useCallback\u3092\u9069\u5207\u306b\u4f7f\u3046","text":"<p>\u3053\u306e\u753b\u50cf\u306f\u5b9f\u969b\u306b\u5b9f\u88c5\u3092\u9032\u3081\u3066\u3044\u3063\u305f\u6642\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u8a18\u9332\u3057\u305f\u3082\u306e\u3060\u3002 <code>progress</code>\u3068\u3044\u3046\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u53d6\u5f97\u3057\u305f\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u52a0\u3048\u30664\u3064\u306ejs\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3002 \u8a18\u9332\u3055\u308c\u3066\u3044\u305f\u3082\u306e\u306fWorker\u5185\u3067\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3060\u3063\u305f\u304c\u3001\u539f\u56e0\u306fWorker\u5185\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u306a\u304fReact\u5074\u3067state\u3092\u66f4\u65b0\u3059\u308b\u969b\u306b\u30d5\u30c3\u30af\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u95a2\u6570\u3092<code>useCallback</code>\u3067\u62ec\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u304b\u3089\u3060\u3002</p> <p>Polling\u3092\u884c\u3046\u3054\u3068\u306b\u95a2\u6570\u304c\u4f5c\u6210\u3055\u308c\u3066\u3001\u540c\u3058\u30d5\u30a1\u30a4\u30eb\u306e\u30c1\u30e3\u30f3\u30af\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u304c\u7121\u610f\u5473\u306b\u7e70\u308a\u8fd4\u3055\u308c\u3066\u3044\u308b\u3002</p> <p></p> <p>\u4fee\u6b63\u5f8c\u306fPolling\u3057\u3066\u3044\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u307f\u306b\u306a\u3063\u305f\u3002 \u6ce8\u610f\u6df1\u304fNetwork\u30bf\u30d6\u3092\u898b\u3066\u3044\u306a\u3044\u3068\u898b\u843d\u3068\u3057\u304c\u3061\u306a\u554f\u984c\u3067\u3042\u308b\u306e\u3067\u3001\u76f4\u63a5\u306fWeb Worker\u3068\u306f\u95a2\u4fc2\u306a\u3044\u304c\u6c17\u3092\u3064\u3051\u305f\u3044\u3002</p>"},{"location":"youtube/all-12-usestate-and-useeffect-mistakes-junior-react-developers-still-make-in-2023/","title":"All 12 useState &amp; useEffect Mistakes Junior React Developers Still Make in 2023","text":"<p>All 12 useState &amp; useEffect Mistakes Junior React Developers Still Make in 2023</p> <p>\u3053\u306e\u52d5\u753b\u306e\u5185\u5bb9\u3092\u307e\u3068\u3081\u3066\u307f\u308b\u3002 \u3055\u3059\u304c\u306b\u3059\u3079\u3066\u5199\u7d4c\u3059\u308b\u306e\u306f\u7121\u610f\u5473\u3060\u3068\u601d\u3063\u305f\u306e\u3067\u3001\u6c17\u306b\u306a\u3063\u305f\u3082\u306e\u3060\u3051\u6b8b\u3059\u3053\u3068\u306b\u3057\u305f\u3002</p>"},{"location":"youtube/all-12-usestate-and-useeffect-mistakes-junior-react-developers-still-make-in-2023/#state-updates-arent-immediate","title":"State updates aren't immediate","text":"BAD<pre><code>import { useState } from \"react\";\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n\n  const handleClick = () =&gt; {\n    setCount(count + 1); // 0 + 1\n    setCount(count + 1); // 0 + 1\n    setCount(count + 1); // 0 + 1\n    setCount(count + 1); // 0 + 1\n  };\n\n  return (\n    &lt;&gt;\n      &lt;button onClick={handleClick}&gt;Click me&lt;/button&gt;\n\n      &lt;p&gt;\n        Count is: {count} {/* 1 */}\n      &lt;/p&gt;\n    &lt;/&gt;\n  );\n}\n</code></pre> <p>\u5fc5\u305a\u3057\u3082<code>state</code>\u3092\u4e0a\u66f8\u304d\u3059\u308b\u306e\u306f\u60aa\u304f\u306f\u306a\u3044\u306e\u3060\u3051\u308c\u3069\u3082\u3001\u3053\u306e\u30b3\u30fc\u30c9\u306e\u610f\u56f3\u3059\u308b\u51fa\u529b\u306f1\u56de\u306e\u30af\u30ea\u30c3\u30af\u306b\u3064\u304d<code>1</code>\u3067\u306f\u306a\u304f<code>4</code>\u3092\u671f\u5f85\u3059\u308b\u306f\u305a\u3002</p> GOOD<pre><code>import { useState } from \"react\";\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n\n  const handleClick = () =&gt; {\n    setCount((prev) =&gt; prev + 1);\n    setCount((prev) =&gt; prev + 1);\n    setCount((prev) =&gt; prev + 1);\n    setCount((prev) =&gt; prev + 1);\n  };\n\n  return (\n    &lt;&gt;\n      &lt;button onClick={handleClick}&gt;Click me&lt;/button&gt;\n\n      &lt;p&gt;\n        Count is: {count} {/* 4 */}\n      &lt;/p&gt;\n    &lt;/&gt;\n  );\n}\n</code></pre> <p>\u76f4\u524d\u306e<code>state</code>\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3068\u3044\u3046\u5185\u5bb9\u3002 \u4e00\u6982\u306b\u3059\u3079\u3066\u304c\u3060\u3081\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u306f\u610f\u5916\u3067\u3042\u3063\u305f\u3002</p>"},{"location":"youtube/all-12-usestate-and-useeffect-mistakes-junior-react-developers-still-make-in-2023/#primitives-vs-non-primitives","title":"Primitives vs non-primitives","text":"primitives<pre><code>import { useState } from \"react\";\n\nexport default function Price() {\n  console.log(\"Component rendering...\");\n  const [price, setPrice] = useState(0);\n  const [price, setPrice] = useState(\"test\");\n  const [price, setPrice] = useState(true);\n\n  const handleClick = () =&gt; {\n    setPrice(0);\n    setPrice(\"test\");\n    setPrice(true);\n  };\n\n  return &lt;button onClick={handleClick}&gt;Click me&lt;/button&gt;;\n}\n</code></pre> <p>\u3053\u308c\u306f\u3042\u307e\u308a\u610f\u8b58\u3057\u305f\u3053\u3068\u304c\u306a\u304b\u3063\u305f\u306e\u3060\u304c\u3001JavaScript\u306b\u304a\u3051\u308b\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u306a\u5024(\u6570\u5024\u3001\u6587\u5b57\u5217\u3001\u8ad6\u7406\u5024)\u306f\u5e38\u306b\u4e00\u5b9a\u306a\u306e\u3067\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3082\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u518d\u63cf\u753b\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3002</p> non-primitives<pre><code>import { useState } from \"react\";\n\nexport default function Price() {\n  console.log(\"Component rendering...\");\n  const [price, setPrice] = useState({\n    number: 100,\n    totalPrice: true,\n  });\n\n  const handleClick = () =&gt; {\n    setPrice({\n      number: 100,\n      totalPrice: true,\n    });\n  };\n\n  return &lt;button onClick={handleClick}&gt;Click me&lt;/button&gt;;\n}\n</code></pre> <p>\u3053\u308c\u304c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u3063\u305f\u5834\u5408\u306f\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u305f\u3073\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u518d\u63cf\u753b\u3055\u308c\u308b\u3002 \u305f\u3068\u3048\u540c\u3058\u5185\u5bb9\u306e\u30ad\u30fc\u3068\u5024\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3060\u3068\u3057\u3066\u3082\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u540c\u4e00\u3067\u306f\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3060\u3002</p> <p>\u3069\u306e\u307f\u3061ESLint\u3067\u3053\u3046\u3044\u3046\u30b1\u30fc\u30b9\u3067\u306f<code>useCallback</code>\u3092\u4f7f\u3048\u3068\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3042\u307e\u308a\u898b\u843d\u3068\u3059\u3053\u3068\u3082\u306a\u3044\u3060\u308d\u3046\u3002</p>"},{"location":"youtube/all-12-usestate-and-useeffect-mistakes-junior-react-developers-still-make-in-2023/#fetching-in-useeffect","title":"Fetching in useEffect","text":"BAD<pre><code>export default function Post() {\n  const [id, setId] = useState(1);\n\n  return (\n    &lt;div&gt;\n      &lt;button onClick={() =&gt; setId(Math.floor(Math.random() * 100))}&gt;\n        Show me a different post\n      &lt;/button&gt;\n\n      &lt;PostBody id={id} /&gt;\n    &lt;/div&gt;\n  );\n}\n\nexport function PostBody({ id }) {\n  const [text, setText] = useState(\"\");\n\n  useEffect(() =&gt; {\n    fetch(`https://dummyjson.com/posts/${id}`)\n      .then((res) =&gt; res.json())\n      .then((data) =&gt; setText(data.body));\n  }, [id]);\n\n  return &lt;p&gt;{text}&lt;/p&gt;;\n}\n</code></pre> <p>\u6b63\u76f412\u3082\u3042\u3063\u305f\u304c\u3001\u307b\u3068\u3093\u3069\u77e5\u3063\u3066\u3044\u305f\u306e\u3067\u6700\u521d\u304b\u3089\u3059\u3079\u3066\u5199\u7d4c\u3057\u306a\u304f\u3066\u672c\u5f53\u306b\u3088\u304b\u3063\u305f\u3068\u601d\u3063\u3066\u3044\u308b\u3002 \u305f\u3060\u3057\u3053\u306e\u6700\u5f8c\u306e\u4f8b\u306f\u975e\u5e38\u306b\u8208\u5473\u6df1\u304f\u3066\u3001\u4e00\u898b\u3059\u308b\u3068\u3053\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u8a2d\u8a08\u306e\u4f55\u304c\u304a\u304b\u3057\u3044\u3068\u3053\u308d\u304c\u3042\u308b\u304b\u306f\u4e00\u898b\u308f\u304b\u308a\u306b\u304f\u3044\u3002</p> <p>\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u4f5c\u308a\u65b9\u3068\u3057\u3066\u306f\u6559\u79d1\u66f8\u7684\u3067\u554f\u984c\u306f\u306a\u3044\u306e\u3060\u3051\u308c\u3069\u3082\u3001\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u308b\u3068\u30e6\u30fc\u30b6\u30fc\u304c\u8907\u6570\u56de\u30af\u30ea\u30c3\u30af\u3092\u884c\u3046\u3068\u3001\u30af\u30ea\u30c3\u30af\u3057\u305f\u5206\u3060\u3051<code>text</code>\u306e\u5185\u5bb9\u304c\u975e\u540c\u671f\u306b\u5207\u308a\u66ff\u308f\u308b\u3002 \u3053\u308c\u306fUI\u3068\u3044\u3046\u304b\u3001\u4f7f\u3044\u52dd\u624b\u306e\u70b9\u3067\u306f\u975e\u5e38\u306b\u3088\u304f\u306a\u3044\u3002 \u3053\u3046\u3044\u3063\u305f\u4f8b\u3067\u306f\u30b9\u30d4\u30ca\u30fc\u30a2\u30a4\u30b3\u30f3\u3092\u8868\u793a\u3059\u308b\u306e\u304c\u30d9\u30bf\u30fc\u306a\u9078\u629e\u80a2\u306a\u306e\u3067\u3001\u305d\u306e\u9593\u306f\u30dc\u30bf\u30f3\u3092\u975e\u6d3b\u6027\u5316(<code>disabled</code>)\u3059\u308b\u3068\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308b\u306e\u3067\u3001\u3053\u306e\u554f\u984c\u3082\u305d\u3082\u305d\u3082\u8d77\u3053\u308a\u306b\u304f\u3044\u3068\u3044\u3048\u3070\u8d77\u3053\u308a\u306b\u304f\u3044\u3002</p> GOOD<pre><code>export default function Post() {\n  const [id, setId] = useState(1);\n\n  return (\n    &lt;div&gt;\n      &lt;button onClick={() =&gt; setId(Math.floor(Math.random() * 100))}&gt;\n        Show me a different post\n      &lt;/button&gt;\n\n      &lt;PostBody id={id} /&gt;\n    &lt;/div&gt;\n  );\n}\n\nexport function PostBody({ id }) {\n  const [text, setText] = useState(\"\");\n\n  useEffect(() =&gt; {\n    const controller = new AbortController();\n\n    fetch(`https://dummyjson.com/posts/${id}`, {\n      signal: controller.signal,\n    })\n      .then((res) =&gt; res.json())\n      .then((data) =&gt; setText(data.body));\n\n    return () =&gt; controller.abort();\n  }, [id]);\n\n  return &lt;p&gt;{text}&lt;/p&gt;;\n}\n</code></pre> <p>\u3053\u3046\u3044\u3046\u30b1\u30fc\u30b9\u3067\u306f<code>AbortController</code>\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002</p> <p>\u5225\u306eID\u304c\u547c\u3073\u51fa\u3055\u308c\u3066\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u65b0\u3057\u304f\u5207\u308a\u66ff\u308f\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u969b\u306b<code>controller.abort()</code>\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001<code>fetch</code>\u95a2\u6570\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u975e\u540c\u671f\u51e6\u7406\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3067\u304d\u308b\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3060\u305d\u3046\u3060\u3002</p> <p>Axios\u306b\u3082\u540c\u69d8\u306b<code>signal</code>\u3092\u53d7\u3051\u4ed8\u3051\u3066\u3044\u308b\u3088\u3046\u3067\u3001\u307b\u307c\u540c\u3058\u30b3\u30fc\u30c9\u3067\u4f7f\u3048\u308b\u3088\u3046\u3060\u3002 \u3069\u3061\u3089\u304b\u3068\u3044\u3046\u3068React\u3088\u308a\u306fFetch API\u306e\u5c0f\u30cd\u30bf\u3060\u3051\u308c\u3069\u3082\u6c4e\u7528\u6027\u306f\u9ad8\u3044\u3068\u601d\u3046\u3002</p>"}]}